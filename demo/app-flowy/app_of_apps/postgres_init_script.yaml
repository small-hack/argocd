apiVersion: v1
kind: Secret
metadata:
  name: postgres-init-script
type: Opaque
stringData:
  # CREATE USER supabase-auth-admin NOINHERIT CREATEROLE LOGIN NOREPLICATION PASSWORD 'mysecurepassword'; 
  init.sql: |
    BEGIN;
    CREATE USER supabase-admin LOGIN CREATEROLE CREATEDB REPLICATION BYPASSRLS; 
    CREATE USER supabase-auth-admin NOINHERIT CREATEROLE LOGIN NOREPLICATION; 
    CREATE SCHEMA IF NOT EXISTS auth AUTHORIZATION supabase-auth-admin; 
    GRANT CREATE ON DATABASE postgres TO supabase-auth-admin; 
    ALTER USER supabase-auth-admin SET search_path = 'auth';
    COMMIT;
